CREATE TABLE IF NOT EXISTS semester (semester_id INT PRIMARY KEY AUTO_INCREMENT, semester_name VARCHAR(50) NOT NULL, semester_code VARCHAR(20) NOT NULL UNIQUE, start_date DATE NOT NULL, end_date DATE NOT NULL, status VARCHAR(20) DEFAULT '未开始', create_time DATETIME DEFAULT CURRENT_TIMESTAMP, update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS course_semester (id INT PRIMARY KEY AUTO_INCREMENT, course_id INT NOT NULL, semester_id INT NOT NULL, create_time DATETIME DEFAULT CURRENT_TIMESTAMP, update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, UNIQUE KEY uk_course_semester (course_id, semester_id), FOREIGN KEY (course_id) REFERENCES course(course_id) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (semester_id) REFERENCES semester(semester_id) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO semester (semester_name, semester_code, start_date, end_date, status) VALUES ('2023-2024学年第一学期', '202301', '2023-09-01', '2024-01-15', '已结束'), ('2023-2024学年第二学期', '202302', '2024-02-20', '2024-06-30', '已结束'), ('2024-2025学年第一学期', '202401', '2024-09-02', '2025-01-16', '进行中');
